(function(d){var k={init:function(a){return this.each(function(){var b=d(this),c=b.data("rsf_slideshow");c||(c=d.extend(!0,{},d.rsfSlideshow.defaults),"object"===typeof a&&d.extend(!0,c,a),b.data("rsf_slideshow",{slides:[],this_slide:0,effect_iterator:{this_effect:-1,direction:1},settings:c,interval_id:!1,loaded_imgs:[],viewed_imgs:[],iterations:0,queued:0}),c=b.data("rsf_slideshow"));c=c.settings;b.rsfSlideshow("getSlidesFromMarkup");c.slides.length&&(b.rsfSlideshow("addSlides",c.slides),c.slides=
[]);"object"===typeof c.eventHandlers&&d.each(c.eventHandlers,function(a,c){b.bind(a,function(a){c(b,a)})});c.controls.playPause.auto&&b.rsfSlideshow("addControl","playPause");c.controls.previousSlide.auto&&b.rsfSlideshow("addControl","previousSlide");c.controls.index.auto&&b.rsfSlideshow("addControl","index");c.controls.nextSlide.auto&&b.rsfSlideshow("addControl","nextSlide");c.autostart&&b.rsfSlideshow("startShow")})},addSlides:function(a){return this.each(function(){if(a instanceof Array)for(var b=
0,c=a.length;b<c;b++)f._addSlide(d(this),a[b]);else f._addSlide(d(this),a)})},removeSlides:function(a){if(void 0===a)return this.each(function(){d(this).data("rsf_slideshow").slides=[]});if(a instanceof Array){a.sort(function(a,b){return b-a});var b=[];return this.each(function(){for(var c=0,e=a.length;c<e;c++)-1===d.inArray(a[c],b)&&(f._removeSlide(d(this),a[c]),b.push(a[c]))})}return this.each(function(){f._removeSlide(d(this),a)})},getSlideData:function(a){return void 0===a?this.data("rsf_slideshow").slides:
this.data("rsf_slideshow").slides[a]?this.data("rsf_slideshow").slides[a]:!1},startShow:function(a,b){return this.each(function(){var c=d(this);c.data("rsf_slideshow").interval_id||(b&&c.rsfSlideshow("nextSlide"),c.data("rsf_slideshow")._current_interval=a,f._setTimeout(c,a),c.bind("_rsSlideReady",function(){f._setTimeout(c,a)}),f._trigger(c,"rsStartShow"))})},stopShow:function(){return this.each(function(){var a=d(this),b=a.data("rsf_slideshow");b.interval_id&&(a.unbind("_rsSlideReady",function(){f._setTimeout(a,
b._current_interval)}),b.interval_id&&(clearTimeout(b.interval_id),b.interval_id=!1),f._trigger(d(this),"rsStopShow"))})},toggleShow:function(){return this.each(function(){d(this).rsfSlideshow("isRunning")?d(this).rsfSlideshow("stopShow"):d(this).rsfSlideshow("startShow")})},isRunning:function(){return this.data("rsf_slideshow").interval_id?!0:!1},currentSlideKey:function(){return this.data("rsf_slideshow").this_slide},totalSlides:function(){return this.data("rsf_slideshow").slides.length},getSlidesFromMarkup:function(a){return this.each(function(){var b=
d(this).data("rsf_slideshow");a||(a={});a.data_container||(a.data_container=b.settings.data_container);var c;c="#"===a.data_container.charAt(0)?d(a.data_container):d(this).children(a.data_container);if(!c.length)return!1;a.slide_data_container||(a.slide_data_container=b.settings.slide_data_container);b=d.extend(!0,{},b.settings.slide_data_selectors);a.slide_data_selectors&&d.extend(!0,b,a.slide_data_selectors);a.slide_data_selectors=b;var e=d(this);c.children(a.slide_data_container).each(function(){var b=
f._findData(d(this),a.slide_data_selectors);e.rsfSlideshow("addSlides",b)})})},nextSlide:function(){return this.each(function(){var a=d(this).data("rsf_slideshow");if(!0!==a.settings.random){if(a.this_slide++,a.this_slide>=a.slides.length)if(a.settings.loop)a.this_slide=0;else return a.this_slide=a.slides.length-1,d(this).rsfSlideshow("stopShow"),!0}else{a.iterations>=a.slides.length&&(a.iterations=0,a.viewed_imgs=[]);for(var b=!0;!0===b;){var c=Math.floor(Math.random()*a.slides.length);-1==d.inArray(c,
a.viewed_imgs)&&(a.this_slide=c,a.viewed_imgs.push(c),a.iterations++,b=!1)}}d(this).rsfSlideshow("showSlide",a.slides[a.this_slide])})},previousSlide:function(){return this.each(function(){var a=d(this).data("rsf_slideshow");a.this_slide--;if(0>a.this_slide)if(a.settings.loop)a.this_slide=a.slides.length-1;else return a.this_slide=0,d(this).rsfSlideshow("stopShow"),!0;d(this).rsfSlideshow("showSlide",a.slides[a.this_slide])})},goToSlide:function(a){return this.each(function(){var b=d(this).data("rsf_slideshow");
"object"===typeof b.slides[a]&&(b.this_slide=a,d(this).rsfSlideshow("showSlide",b.slides[b.this_slide]))})},showSlide:function(a){var b=this,c=b.data("rsf_slideshow"),e=b.width(),g=b.height();f._trigger(b,"rsPreTransition");b.children("img:first").css("z-index",0);var h=new Image;d(h).bind("load",function(){var h=d(this);h.addClass("rsf-slideshow-image");var l=function(l,k){f._trigger(b,"rsImageReady");var i=0;l&&(i=Math.ceil(e/2-l/2));var j=0;k&&(j=Math.ceil(g/2-k/2));h.css({left:i});h.css({top:j});
a.image_title&&h.attr("title",a.image_title);a.image_alt&&h.attr("alt",a.image_alt);a.link_to&&(h=d('<a href="'+a.link_to+'"></a>').append(h));i=d("<div></div>");i.addClass(c.settings.slide_container_class);i.append(h).css("display","none");a.caption&&(j=d("<div>"+a.caption+"</div>"),j.addClass(c.settings.slide_caption_class),j.appendTo(i),a.captionClass&&j.addClass(a.captionClass));j=c.settings.effect;a.effect&&(j=a.effect);f._trigger(b,"_rsSlideReady",{$slide:i});f._trigger(b,"rsSlideReady",{$slide:i});
f._transitionWith(b,i,j);return!0};f._getImageDimensions(b,h,l,1E3*c.settings.interval/2,function(){l()})});h.src=a.url;return this},addControl:function(a){return this.each(function(){var b=d(this),c=b.data("rsf_slideshow").settings,e=c.controls[a].generate(b);f._controlsContainer(b);c.controls[a].place(b,e);c="bind"+a.substr(0,1).toUpperCase()+a.substr(1,a.length);b.rsfSlideshow(c,e)})},bindPlayPause:function(a){return this.each(function(){var b=d(this);b.data("rsf_slideshow");a.bind("click.rsfSlideshow",
function(a){a.preventDefault();b.rsfSlideshow("toggleShow")})})},bindPreviousSlide:function(a,b){return this.each(function(){var c=d(this),e=c.data("rsf_slideshow");b||(b=e.settings.controls.previousSlide.autostop);a.bind("click.rsfSlideshow",function(a){a.preventDefault();c.rsfSlideshow("previousSlide");b&&c.rsfSlideshow("stopShow")})})},bindNextSlide:function(a,b){return this.each(function(){var c=d(this),e=c.data("rsf_slideshow");b||(b=e.settings.controls.nextSlide.autostop);a.bind("click.rsfSlideshow",
function(a){a.preventDefault();c.rsfSlideshow("nextSlide");b&&c.rsfSlideshow("stopShow")})})},bindIndex:function(a,b){return this.each(function(){var a=d(this),e=a.data("rsf_slideshow").settings;b||(b=e.controls.index.autostop);e.controls.index.getEach(a).bind("click.rsfSlideshow",function(g){g.preventDefault();if(g=e.controls.index.getSlideKey(d(this)))a.rsfSlideshow("goToSlide",g),b&&a.rsfSlideshow("stopShow")});f._bindActiveIndex(a)})}};d.fn.rsfSlideshow=function(a){if(!this.length)return this;
if(k[a])return k[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return k.init.apply(this,arguments);d.error("Method "+a+" does not exist on jQuery.rsfSlidehow")};var f={_findData:function(a,b){var c={},d,g;for(g in b)b.hasOwnProperty(g)&&(d=a.clone(),b[g].selector&&(d=d.children(b[g].selector)),d=b[g].attr?d.attr(b[g].attr):d.html(),c[g]=d);return c},_addSlide:function(a,b){var c=a.data("rsf_slideshow");if("string"===typeof b){var e=d.trim(b);c.slides.push({url:e})}else if(b.url){for(e in b)b.hasOwnProperty(e)&&
(b[e]=d.trim(b[e]));c.slides.push(b)}},_removeSlide:function(a,b){a.data("rsf_slideshow").slides.splice(b,1)},_transitionWith:function(a,b,c){var e=a.data("rsf_slideshow"),g="random",f=a.find("."+e.settings.slide_container_class+":last");f.length?b.insertAfter(f):b.prependTo(a);"object"===typeof c&&(c.iteration&&c.effects)&&(g=c.iteration,c=c.effects);if(c instanceof Array){switch(g){case "loop":e.effect_iterator.this_effect++;e.effect_iterator.this_effect>c.length-1&&(e.effect_iterator.this_effect=
0);break;case "backAndForth":e.effect_iterator.this_effect+=e.effect_iterator.direction;0>e.effect_iterator.this_effect&&(e.effect_iterator.this_effect=1,e.effect_iterator.direction*=-1);e.effect_iterator.this_effect>c.length-1&&(e.effect_iterator.this_effect=c.length-2,e.effect_iterator.direction*=-1);break;default:e.effect_iterator.this_effect=Math.floor(Math.random()*c.length)}c=c[e.effect_iterator.this_effect]}if(d.rsfSlideshow.transitions[c]&&"function"===typeof d.rsfSlideshow.transitions[c])d.rsfSlideshow.transitions[c](a,
b)},_doSlide:function(a,b,c,d){var g=a.data("rsf_slideshow"),h=b.prev();b.css({top:d,left:c});b.css("display","block");b.stop().animate({top:0,left:0},g.settings.transition,g.settings.easing,function(){f._endTransition(a,b)});h.stop().animate({top:0-d,left:0-c},g.settings.transition,g.settings.easing)},_getImageDimensions:function(a,b,c,d,g,h){h||(h=0,a.prepend(b));var k=b.outerWidth(),l=b.outerHeight();if(k&&l)return b.detach(),c(k,l),!0;if(d&&h>d)return b.detach(),g&&"function"===typeof g&&g(d,
h),!1;h+=200;setTimeout(function(){f._getImageDimensions(a,b,c,d,g,h)},200)},_endTransition:function(a,b){b.prev().remove();f._trigger(a,"rsPostTransition");a.rsfSlideshow("currentSlideKey")===a.rsfSlideshow("totalSlides")-1?f._trigger(a,"rsLastSlide"):0===a.rsfSlideshow("currentSlideKey")&&f._trigger(a,"rsFirstSlide")},_bindActiveIndex:function(a){var b=a.data("rsf_slideshow").settings.controls.index;a.bind("rsPreTransition",function(){var c=d(this).rsfSlideshow("currentSlideKey");b.getEach(a).removeClass(b.active_class);
b.getSingleByKey(a,c).addClass(b.active_class)})},_controlsContainer:function(a){var b=a.data("rsf_slideshow").settings;if(!b.controls.container.get(a).length){var c=b.controls.container.generate(a);b.controls.container.place(a,c)}},_trigger:function(a,b,c){var e=a.data("rsf_slideshow");"object"!==typeof c&&(c={});d.extend(c,{slide_key:e.this_slide,slide:e.slides[e.this_slide]});a.trigger(b,c)},_setTimeout:function(a,b){var c=a.data("rsf_slideshow");c.interval_id&&clearTimeout(c.interval_id);b||(b=
c.settings.interval);b<=c.settings.transition/1E3&&(b=c.settings.transition/1E3+0.1);c.interval_id=setTimeout(function(){a.rsfSlideshow("nextSlide")},1E3*b)}};d.rsfSlideshow={defaults:{interval:5,transition:1E3,effect:"fade",easing:"swing",loop:!0,autostart:!0,slides:[],slide_container_class:"slide-container",slide_caption_class:"slide-caption",data_container:"ol.slides",slide_data_container:"li",slide_data_selectors:{url:{selector:"a",attr:"href"},caption:{selector:"a",attr:"title"},link_to:{selector:"a",
attr:"data-link-to"},effect:{selector:"a",attr:"data-effect"}},eventHandlers:{rsStartShow:function(a){var b=d(a).data("rsf_slideshow").settings.controls.playPause;b.get(d(a)).html("Pause").addClass(b.playing_class)},rsStopShow:function(a){var b=d(a).data("rsf_slideshow").settings.controls.playPause;b.get(d(a)).html("Play").addClass(b.paused_class)}},controls:{playPause:{generate:function(a){return d('<a href="#" class="rs-play-pause '+a.data("rsf_slideshow").settings.controls.playPause.paused_class+
'" data-control-for="'+a.attr("id")+'">Play</a>')},place:function(a,b){a.data("rsf_slideshow").settings.controls.container.get(a).append(b)},get:function(a){return d('.rs-play-pause[data-control-for="'+a.attr("id")+'"]')},playing_class:"rs-playing",paused_class:"rs-paused",auto:!1},previousSlide:{generate:function(a){return d('<a href="#" class="rs-prev" data-control-for="'+a.attr("id")+'">&lt;</a>')},place:function(a,b){a.data("rsf_slideshow").settings.controls.container.get(a).append(b)},get:function(a){return d('.rs-prev[data-control-for="'+
a.attr("id")+'"]')},autostop:!0,auto:!1},nextSlide:{generate:function(a){return d('<a href="#" class="rs-next" data-control-for="'+a.attr("id")+'">&gt;</a>')},place:function(a,b){a.data("rsf_slideshow").settings.controls.container.get(a).append(b)},get:function(a){return d('.rs-next[data-control-for="'+a.attr("id")+'"]')},autostop:!0,auto:!1},index:{generate:function(a){var b=a.rsfSlideshow("totalSlides"),c=d('<ul class="rs-index-list clearfix"></ul>');c.attr("data-control-for",a.attr("id"));for(var e=
0;e<b;e++){var g=d('<a href="#"></a>');g.addClass("rs-index");g.attr("data-control-for",a.attr("id"));g.attr("data-slide-key",e);g.append(e+1);e===a.rsfSlideshow("currentSlideKey")&&g.addClass("rs-active");var f=d("<li></li>");f.append(g);c.append(f)}return c},place:function(a,b){a.data("rsf_slideshow").settings.controls.container.get(a).append(b)},get:function(a){return d('.rs-index-list[data-control-for="'+a.attr("id")+'"]')},getEach:function(a){return d('.rs-index[data-control-for="'+a.attr("id")+
'"]')},getSingleByKey:function(a,b){return d('.rs-index[data-control-for="'+a.attr("id")+'"][data-slide-key="'+b+'"]')},getSlideKey:function(a){return a.attr("data-slide-key")},active_class:"rs-active",autostop:!0,auto:!1},container:{generate:function(a){return d('<div class="rs-controls clearfix" id="rs-controls-'+a.attr("id")+'"></div>')},place:function(a,b){a.after(b)},get:function(a){return d("#rs-controls-"+a.attr("id"))}}}},transitions:{none:function(a,b){b.css("display","block")},fade:function(a,
b){b.fadeIn(a.data("rsf_slideshow").settings.transition,function(){f._endTransition(a,b)})},slideLeft:function(a,b){var c=b.outerWidth();f._doSlide(a,b,c,0)},slideRight:function(a,b){var c=0-b.outerWidth();f._doSlide(a,b,c,0)},slideUp:function(a,b){var c=b.outerHeight();f._doSlide(a,b,0,c)},slideDown:function(a,b){var c=0-b.outerHeight();f._doSlide(a,b,0,c)}}}})(jQuery);